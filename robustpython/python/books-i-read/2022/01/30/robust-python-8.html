<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How and where to use enums in Python | mlops.systems</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="How and where to use enums in Python" />
<meta name="author" content="Alex Strick van Linschoten" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The eight chapter of Patrick Viafore’s book, ‘Robust Python’, gets into enums which you can use when you have a grouping of some constants that belong together." />
<meta property="og:description" content="The eight chapter of Patrick Viafore’s book, ‘Robust Python’, gets into enums which you can use when you have a grouping of some constants that belong together." />
<link rel="canonical" href="https://mlops.systems/robustpython/python/books-i-read/2022/01/30/robust-python-8.html" />
<meta property="og:url" content="https://mlops.systems/robustpython/python/books-i-read/2022/01/30/robust-python-8.html" />
<meta property="og:site_name" content="mlops.systems" />
<meta property="og:image" content="https://mlops.systems/images/robust-python/robust-python-cover.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-30T00:00:00-06:00" />
<script type="application/ld+json">
{"datePublished":"2022-01-30T00:00:00-06:00","url":"https://mlops.systems/robustpython/python/books-i-read/2022/01/30/robust-python-8.html","@type":"BlogPosting","dateModified":"2022-01-30T00:00:00-06:00","image":"https://mlops.systems/images/robust-python/robust-python-cover.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlops.systems/robustpython/python/books-i-read/2022/01/30/robust-python-8.html"},"author":{"@type":"Person","name":"Alex Strick van Linschoten"},"headline":"How and where to use enums in Python","description":"The eight chapter of Patrick Viafore’s book, ‘Robust Python’, gets into enums which you can use when you have a grouping of some constants that belong together.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://mlops.systems/feed.xml" title="mlops.systems" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script
  defer
  data-domain="mlops.systems"
  src="https://plausible.io/js/plausible.js"
></script>


<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">mlops.systems</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/drafts/2022-03-25-synthetic-data-results.html">Performance boosts after training with synthetic data</a><a class="page-link" href="/drafts/2022-03-XX-multi-stage-docker-dockerhub.html">Multi-stage Docker builds and pushing to registries</a><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">How and where to use enums in Python</h1><p class="page-description">The eight chapter of Patrick Viafore's book, 'Robust Python', gets into enums which you can use when you have a grouping of some constants that belong together.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-01-30T00:00:00-06:00" itemprop="datePublished">
        Jan 30, 2022
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Alex Strick van Linschoten</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#robustpython">robustpython</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#books-i-read">books-i-read</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>The second part of Viafore’s <a href="https://www.amazon.com/Robust-Python-Patrick-Viafore-ebook-dp-B09982C9FX/dp/B09982C9FX/ref=mt_other?qid=&amp;me=&amp;tag=soumet-20&amp;_encoding=UTF8">‘Robust Python’</a> is all about user-created types. We start simple in chapter eight and consider the <code class="language-plaintext highlighter-rouge">Enum</code> type as a way of defining a particular restricted set of values. An example might help get us started:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>

<span class="k">class</span> <span class="nc">TrafficLightsState</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
  <span class="n">RED</span> <span class="o">=</span> <span class="s">"red"</span>
  <span class="n">YELLOW</span> <span class="o">=</span> <span class="s">"yellow"</span>
  <span class="n">GREEN</span> <span class="o">=</span> <span class="s">"green"</span>
  <span class="n">OFF</span> <span class="o">=</span> <span class="s">"off"</span>

<span class="n">current_state</span> <span class="o">=</span> <span class="n">TrafficLightsState</span><span class="p">.</span><span class="n">GREEN</span>
<span class="k">print</span><span class="p">(</span><span class="n">current_state</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="c1"># prints 'green'
</span></code></pre></div></div>

<p>We subclass off <code class="language-plaintext highlighter-rouge">Enum</code> and define the pairings of values that belong together. I hope you can see already that this is a readable way to define these values and show that they are part of the same semantic grouping.</p>

<p>If we’re using these definitions not because we care about the values themselves but because we want to be able to evaluate whether the state of one particular traffic light is the same as a different traffic light, we can use <code class="language-plaintext highlighter-rouge">auto</code> to automatically assign values (ascending integers, by default) in the following way:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">auto</span>

<span class="k">class</span> <span class="nc">TrafficLightsState</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
  <span class="n">RED</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
  <span class="n">YELLOW</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
  <span class="n">GREEN</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
  <span class="n">OFF</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

<span class="n">current_state</span> <span class="o">=</span> <span class="n">TrafficLightsState</span><span class="p">.</span><span class="n">GREEN</span>
<span class="k">print</span><span class="p">(</span><span class="n">current_state</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="c1"># prints 3
</span></code></pre></div></div>

<p>You can iterate through your enums or get their length just as if it was a list, too.</p>

<p>While writing the above text, I realised that I was getting confused about the difference between types and classes in Python. It turns out that whatever differences once existed, they aren’t much of a thing any more and <a href="https://stackoverflow.com/questions/4162578/python-terminology-class-vs-type">to all intents and purposes</a> they’re practically the same thing.</p>

<p>A lot of the enum-related definitions at work are defined in <a href="https://github.com/zenml-io/zenml/blob/0.6.0/src/zenml/enums.py">this file</a>. You can see that we tend not to use <code class="language-plaintext highlighter-rouge">auto</code>, though I’m not really sure why. (We don’t ever seem to compare against actual values.)</p>

<p>If you want to make sure that the actual values assigned to these grouped constants are unique, you can add the <code class="language-plaintext highlighter-rouge">@unique</code> decorator which will enforce that you aren’t duplicating values.</p>

<p>Better still for the readability of your code, you can use this collective type in your type annotations. For sure the difference between these two options should be clear:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="n">some_input</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
	<span class="c1"># code goes here
</span>
<span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="n">some_input</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TrafficLightsState</span><span class="p">:</span>
	<span class="c1"># code goes here
</span></code></pre></div></div>

<p>In the first case, it is far less clear what’s going on.</p>

<p>Note that if you’re purely looking for a way to restrict the assignation to a particular variable, you can also use the <code class="language-plaintext highlighter-rouge">Literal</code> type, introduced in Python 3.8, though remember that it doesn’t help with iteration, runtime checking or map values from name to value. For all that, you’ll want to be using <code class="language-plaintext highlighter-rouge">Enum</code>.”</p>

<p>If you want a way to combine Enums together, you can subclass from <code class="language-plaintext highlighter-rouge">enum.Flag</code>. Consider the case of when you have a list of enums for days of the week, but you want to represent the weekend as a pairing of Saturday and Sunday (if you were in Europe, e.g.). You could do the following:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Flag</span><span class="p">,</span> <span class="n">auto</span>
<span class="k">class</span> <span class="nc">Weekday</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
	<span class="n">MONDAY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">TUESDAY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">WEDNESDAY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">THURSDAY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">FRIDAY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">SATURDAY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">SUNDAY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	
<span class="n">weekend</span> <span class="o">=</span> <span class="n">Weekday</span><span class="p">.</span><span class="n">SATURDAY</span> <span class="o">|</span> <span class="n">Weekday</span><span class="p">.</span><span class="n">SUNDAY</span>
</code></pre></div></div>

<p>You can perform bitwise operations on these combined groupings, but note that the values must support bitwise operations. (Strings don’t support them, while integers do.)</p>

<p>Finally, the chapter covers the special case of <code class="language-plaintext highlighter-rouge">IntEnum</code> and <code class="language-plaintext highlighter-rouge">IntFlag</code> which allows for the conversion of integer values. This can be confusing and lead to non-robust behaviours, so the book discourages this particular usage.</p>

<p>Next up is Data Classes, something I’m extremely interested in getting to grips with as it comes up in our codebase at work a decent amount.</p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="strickvl/ml-blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/robustpython/python/books-i-read/2022/01/30/robust-python-8.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>A place to share my technical learnings.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/strickvl" target="_blank" title="strickvl"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/strickvl" target="_blank" title="strickvl"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
